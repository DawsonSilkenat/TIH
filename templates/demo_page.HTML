<html lang="en">
<head>
    <title>TIH LLM Demo</title>
    <style>
        .center {
            display: flex;
            flex-direction: column;
            justify-content: flex-start; 
            align-items: center; 
        }
        .response {
            white-space: pre-line;
            width: 50%;
            max-width: 50%;
        }
        .pre-content {
            white-space: pre-line;
        }
        td {
          border: 1px solid black;
          border-radius: 10px;
          padding: 0 15px;
        }

        td:first-child {
            border: none;
        }
        td:last-child {
            width:100%;
            padding: 10px;
        }

        table {
            border-collapse: separate;
            border-spacing: 0 10px;
        }

        #loader {
          width: 120px;
          height: 120px;
          border: 16px solid #f3f3f3;
          border-radius: 50%;
          border-top: 16px solid #3498db;
          -webkit-animation: spin 2s linear infinite;
          animation: spin 2s linear infinite;
        }

        @-webkit-keyframes spin {
          0% { -webkit-transform: rotate(0deg); }
          100% { -webkit-transform: rotate(360deg); }
        }

        @keyframes spin {
          0% { transform: rotate(0deg); }
          100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <div class="center">
        <div class="response">
            <table>
                {% if conversations %}
                    {% for conversation in conversations: %}
                        {% if 'content' in conversation %}
                        {% if conversation['role'] != 'tool' %}
                        <tr>
                            <td>
                                {{ conversation['role'] }}
                            </td>
                            <td>
                                <pre class="pre-content">{{ conversation['content'] }}</pre>
                            </td>
                        </tr>
                        {% endif %}
                        {% endif %}
                    {% endfor %}
                {% endif %}
                <tr>
                    <td></td>
                    <td style="border: none;">
                        <div class="center">
                            <div id="loader" style="display:none;"></div>
                        </div>
                    </td>
                </tr>
                <tr>
                    <td></td>
                    <td style="border: none;">
                        <div class="center">
                            <form action="/" method="post" onsubmit="showSpinner()" style="width:100%;">
                                <div style="display: flex;">
                                    <input style="flex-grow: 1; margin-right:5px; border-radius: 10px; height: 40px;" type="text" id="user_input" name="user_input" {% if user_query %} value="{{user_query}}" {% endif %} placeholder="Enter your recommendation request here"/>
                                    <input style="flex-grow: 0;" type="submit" value=">>">
                                </div>
                            </form>
                        </div>
                    </td>
                </tr>
            </table>
        </div>
    </div>
    <script>
        function showSpinner()
        {
            document.getElementById("loader").style.display = "block";
        }
    </script>
</body>
</html>
